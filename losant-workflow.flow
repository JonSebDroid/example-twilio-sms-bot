{"globals":[{"key":"TwilioSID","type":"string"},{"key":"TwilioToken","type":"string"},{"key":"TwilioNumber","type":"string"},{"key":"RedisURL","type":"string"},{"key":"RedisPort","type":"string"},{"key":"RedisPass","type":"string"}],"triggers":[{"type":"webhook","meta":{"category":"trigger","name":"webhook","label":"Webhook","x":140,"y":60,"uiId":"B1yCMPWU","description":""},"config":{},"key":"5773e29c9220250100da6951","outputIds":[["rk40fPbU","rJ2hHwZI"]]}],"nodes":[{"type":"DebugNode","meta":{"category":"output","name":"debug","label":"Debug","x":340,"y":180,"description":""},"config":{"message":""},"id":"rk40fPbU","outputIds":[]},{"type":"RedisNode","meta":{"category":"data","name":"redis","label":"Get Step","x":140,"y":300,"description":""},"config":{"host":"{{ globals.RedisURL }}","port":"{{ globals.RedisPort }}","dbNumber":"0","password":"{{ globals.RedisPass }}","command":"get","resultPath":"data.step","arguments":["{{ data.body.From }}"]},"id":"BJ7MSPW8","outputIds":[["B1-UOw-I"]]},{"type":"ConditionalNode","meta":{"category":"logic","name":"conditional","label":"Hi?","x":140,"y":180,"description":""},"config":{"expression":"{{ data.body.Body }} === 'Hi' || {{ data.body.Body }} === 'HI' || {{ data.body.Body }} === 'hi'"},"id":"rJ2hHwZI","outputIds":[["BJ7MSPW8"],["rkDZ8DZI"]]},{"type":"TwilioSmsNode","meta":{"category":"output","name":"twilio","label":"Send Welcome","x":340,"y":300,"description":""},"config":{"accountSid":"{{ globals.TwilioSID }}","authToken":"{{ globals.TwilioToken }}","bodyTemplate":"Welcome to the random SMS bot. Reply with \"1\" for random Chuck Norris joke. Reply with \"2\" for a random cat fact.","mediaUrl":"","toNumbers":["{{ data.body.From }}"],"fromNumber":"{{ globals.TwilioNumber }}"},"id":"rkDZ8DZI","outputIds":[["HyMG_DZU"]]},{"type":"RedisNode","meta":{"category":"data","name":"redis","label":"Record Step","x":340,"y":420,"description":""},"config":{"host":"{{ globals.RedisURL }}","port":"{{ globals.RedisPort }}","dbNumber":"0","password":"{{ globals.RedisPass }}","command":"set","resultPath":"","arguments":["{{ data.body.From }}","welcome"]},"id":"HyMG_DZU","outputIds":[]},{"type":"ConditionalNode","meta":{"category":"logic","name":"conditional","label":"Welcome Step?","x":140,"y":420,"description":""},"config":{"expression":"{{ data.step }} === 'welcome'"},"id":"B1-UOw-I","outputIds":[["H1p8KvbL"],["BkJt_vWL","Syd5uwZ8"]]},{"type":"ConditionalNode","meta":{"category":"logic","name":"conditional","label":"Norris?","x":480,"y":540,"description":""},"config":{"expression":"{{ data.body.Body }} === '1'"},"id":"BkJt_vWL","outputIds":[[],["BkvsdvZI"]]},{"type":"ConditionalNode","meta":{"category":"logic","name":"conditional","label":"Cat Fact?","x":680,"y":540,"description":""},"config":{"expression":"{{ data.body.Body }} === '2'"},"id":"Syd5uwZ8","outputIds":[[],["H1Zg2PWI"]]},{"type":"TwilioSmsNode","meta":{"category":"output","name":"twilio","label":"Send Norris","x":480,"y":660,"description":""},"config":{"accountSid":"{{ globals.TwilioSID }}","authToken":"{{ globals.TwilioToken }}","bodyTemplate":"Norris it is! Reply with \"1\" for an explicit joke. Reply with \"2\" for a nerdy joke.","mediaUrl":"","toNumbers":["{{ data.body.From }}"],"fromNumber":"{{ globals.TwilioNumber }}"},"id":"BkvsdvZI","outputIds":[["r1u-FPZU"]]},{"type":"RedisNode","meta":{"category":"data","name":"redis","label":"Record Step","x":480,"y":780,"description":""},"config":{"host":"{{ globals.RedisURL }}","port":"{{ globals.RedisPort }}","dbNumber":"0","password":"{{ globals.RedisPass }}","command":"set","resultPath":"","arguments":["{{ data.body.From }}","norris"]},"id":"r1u-FPZU","outputIds":[]},{"type":"ConditionalNode","meta":{"category":"logic","name":"conditional","label":"Norris Step?","x":140,"y":540,"description":""},"config":{"expression":"{{ data.step }} === 'norris'"},"id":"H1p8KvbL","outputIds":[[],["HyBsFwWU","Hk5CtDWU"]]},{"type":"ConditionalNode","meta":{"category":"logic","name":"conditional","label":"Explicit?","x":60,"y":660,"description":""},"config":{"expression":"{{ data.body.Body }} === '1'"},"id":"HyBsFwWU","outputIds":[[],["Syf4cvbU"]]},{"type":"ConditionalNode","meta":{"category":"logic","name":"conditional","label":"Nerdy?","x":260,"y":660,"description":""},"config":{"expression":"{{ data.body.Body }} === '2'"},"id":"Hk5CtDWU","outputIds":[[],["SyBOcvW8"]]},{"type":"HttpNode","meta":{"category":"output","name":"http","label":"Get Explicit","x":60,"y":780,"description":""},"config":{"method":"GET","uriTemplate":"http://api.icndb.com/jokes/random?limitTo=[explicit]","responsePath":"data.joke","headerInfo":[]},"id":"Syf4cvbU","outputIds":[["HJmU9vZU"]]},{"type":"TwilioSmsNode","meta":{"category":"output","name":"twilio","label":"Send Joke","x":160,"y":900,"description":""},"config":{"accountSid":"{{ globals.TwilioSID }}","authToken":"{{ globals.TwilioToken }}","bodyTemplate":"{{ data.joke.body.value.joke }}","mediaUrl":"","toNumbers":["{{ data.body.From }}"],"fromNumber":"{{ globals.TwilioNumber }}"},"id":"HJmU9vZU","outputIds":[]},{"type":"HttpNode","meta":{"category":"output","name":"http","label":"Get Nerdy","x":260,"y":780,"description":""},"config":{"method":"GET","uriTemplate":"http://api.icndb.com/jokes/random?limitTo=[nerdy]","responsePath":"data.joke","headerInfo":[]},"id":"SyBOcvW8","outputIds":[["HJmU9vZU"]]},{"type":"HttpNode","meta":{"category":"data","name":"http","label":"Get Cat Fact","x":680,"y":660,"description":""},"config":{"method":"GET","uriTemplate":"http://catfacts-api.appspot.com/api/facts","responsePath":"data.fact","headerInfo":[]},"id":"H1Zg2PWI","outputIds":[["B1TWhDWU"]]},{"type":"TwilioSmsNode","meta":{"category":"output","name":"twilio","label":"Send Cat Fact","x":680,"y":780,"description":""},"config":{"accountSid":"{{ globals.TwilioSID }}","authToken":"{{ globals.TwilioToken }}","bodyTemplate":"{{ data.fact.body.facts[0] }}","mediaUrl":"","toNumbers":["{{ data.body.From }}"],"fromNumber":"{{ globals.TwilioNumber }}"},"id":"B1TWhDWU","outputIds":[]}],"name":"SMS Bot","enabled":true,"description":"","applicationId":"5773e18d9220250100da6950","_type":"flow","_exportDate":"2016-07-12T15:30:41.655Z"}